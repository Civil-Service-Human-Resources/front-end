{% extends 'layouts/default.layout.njk' %}

{% set pageTitle = 'Search results - Learning Platform for Government' %}
{% set blackBarTitle = 'Learning Platform for Government' %} {% set learnerPrototypeVersion = 'v12' %}
{% set signOutPath = '/prototypes/learner/v12/' %}
{% set homePath = '/prototypes/learner/v12/home' %}
{% set searchTerm = searchTerm if searchTerm %}
{% set showPreFilteredResults = showPreFilteredResults if showPreFilteredResults %}

{% set newCoreInterests = newCoreInterests if newCoreInterests %}


{% block content %}

    {% call components.gridRow() %}

        {% call components.columnFull() %}

            {{ components.pageHeading('Search results') }}

            {{ components.searchBox(actionPath='/prototypes/learner/v12/search') }}

            {% if showPreFilteredResults %}
                <p class="lede">There were <strong>14</strong> results for <strong>HMRC</strong></p>
            {% else %}
                <p class="lede">There were <strong>46</strong> results for <strong>senior management</strong></p>
            {% endif %}

        {%- endcall %}

    {%- endcall %}

    {% call components.gridRow() %}

        {% call components.columnOneThird(extraClass='filters-column') %}

            {% call components.formElement(name='registerDepartment', method='POST', action="#") %}

                <div class="filters">

                    <div class="filter">
                        <h2 class="filter__title">Learning type</h2>
                        <span class="filter__toggle"></span>
                        <ul class="filter__list u-clearfix">
                            <li class="filter__item">
                                <div class="multiple-choice filter__switch">
                                    <input id="typeFilter3" type="checkbox" name="learningTypeBlog" value="blog">
                                    <label for="typeFilter3" class="u-display-ib">Blog</label>
                                </div>
                            </li>
                            <li class="filter__item">
                                <div class="multiple-choice filter__switch">
                                    <input id="typeFilter2" type="checkbox" name="learningTypeClassroom" value="classroom">
                                    <label for="typeFilter2" class="u-display-ib">Classroom</label>
                                </div>
                            </li>
                            <li class="filter__item">
                                <div class="multiple-choice filter__switch">
                                    <input id="typeFilter1" type="checkbox" name="learningTypeOnline" value="online">
                                    <label for="typeFilter1" class="u-display-ib">Online</label>
                                </div>
                            </li>
                            <li class="filter__item">
                                <div class="multiple-choice filter__switch">
                                    <input id="typeFilter4" type="checkbox" name="learningTypeVideo" value="video">
                                    <label for="typeFilter4" class="u-display-ib">Video</label>
                                </div>
                            </li>
                        </ul>
                    </div>

                    <div class="filter">
                        <h2 class="filter__title">Cost</h2>
                        <span class="filter__toggle"></span>
                        <ul class="filter__list u-clearfix">
                            <li class="filter__item">
                                <div class="multiple-choice filter__switch">
                                    <input id="costFilter" type="checkbox" name="learningCost" value="blog">
                                    <label for="costFilter" class="u-display-ib">Show only free</label>
                                </div>
                            </li>
                        </ul>
                    </div>

                    <div class="filter">
                        <h2 class="filter__title">Your areas of work</h2>
                        <span class="filter__toggle"></span>
                        <ul class="filter__list u-clearfix">
                            <li class="filter__item">
                                <div class="multiple-choice filter__switch">
                                    <input id="areaPrimary" type="checkbox" name="areaFilter" value="ddat">
                                    <label for="areaPrimary" class="u-display-ib">Digital, data and Technology</label>
                                </div>
                            </li>
                            <li class="filter__item">
                                <div class="multiple-choice filter__switch">
                                    <input id="areaCommercial" type="checkbox" name="areaFilter" value="legal">
                                    <label for="areaCommercial" class="u-display-ib">Legal</label>
                                </div>
                            </li>
                            <li class="filter__item">
                                <div class="multiple-choice filter__switch">
                                    <input id="areaCommercial" type="checkbox" name="areaFilter" value="communications">
                                    <label for="areaCommercial" class="u-display-ib">Communications</label>
                                </div>
                            </li>
                        </ul>
                    </div>

                    <div class="filter filter-toggle __filter-toggle--shut">
                        <h2 class="filter__title filter__title--closed" tabindex="0" onclick="toggleVisibility(this, 'toggleOtherAreasList', 'js-hidden')">Other areas of work</h2>
                        <span class="filter__toggle"></span>
                        <ul class="filter__list u-clearfix js-hidden" id="toggleOtherAreasList">
                            <li class="filter__item">
                                <div class="multiple-choice filter__switch">
                                    <input id="otherAreasAnalysis" type="checkbox" name="otherAreasFilter" value="analysis">
                                    <label for="otherAreasAnalysis" class="u-display-ib">Analysis</label>
                                </div>
                            </li>
                            <li class="filter__item">
                                <div class="multiple-choice filter__switch">
                                    <input id="otherAreasCommunications" type="checkbox" name="otherAreasFilter" value="communications">
                                    <label for="otherAreasCommunications" class="u-display-ib">Communications</label>
                                </div>
                            </li>
                            <li class="filter__item">
                                <div class="multiple-choice filter__switch">
                                    <input id="otherAreasCorporatefinance" type="checkbox" name="otherAreasFilter" value="corpFinance">
                                    <label for="otherAreasCorporatefinance" class="u-display-ib">Corporate finance</label>
                                </div>
                            </li>
                            <li class="filter__item">
                                <div class="multiple-choice filter__switch">
                                    <input id="otherAreasFinance" type="checkbox" name="otherAreasFilter" value="finance">
                                    <label for="otherAreasFinance" class="u-display-ib">Finance</label>
                                </div>
                            </li>
                            <li class="filter__item">
                                <div class="multiple-choice filter__switch">
                                    <input id="otherAreasFraud" type="checkbox" name="otherAreasFilter" value="fraud">
                                    <label for="otherAreasFraud" class="u-display-ib">Fraud, error, debt and grants</label>
                                </div>
                            </li>
                            <li class="filter__item">
                                <div class="multiple-choice filter__switch">
                                    <input id="otherAreasHR" type="checkbox" name="otherAreasFilter" value="hr">
                                    <label for="otherAreasHR" class="u-display-ib">Human resources</label>
                                </div>
                            </li>
                            <li class="filter__item">
                                <div class="multiple-choice filter__switch">
                                    <input id="otherAreasInternal" type="checkbox" name="otherAreasFilter" value="internal">
                                    <label for="otherAreasInternal" class="u-display-ib">Internal audit</label>
                                </div>
                            </li>
                            <li class="filter__item">
                                <div class="multiple-choice filter__switch">
                                    <input id="otherAreasLegal" type="checkbox" name="otherAreasFilter" value="legal">
                                    <label for="otherAreasLegal" class="u-display-ib">Legal</label>
                                </div>
                            </li>
                            <li class="filter__item">
                                <div class="multiple-choice filter__switch">
                                    <input id="otherAreasDevlivery" type="checkbox" name="otherAreasFilter" value="commercial">
                                    <label for="otherAreasDevlivery" class="u-display-ib">Project delivery</label>
                                </div>
                            </li>
                            <li class="filter__item">
                                <div class="multiple-choice filter__switch">
                                    <input id="otherAreasProperty" type="checkbox" name="otherAreasFilter" value="property">
                                    <label for="otherAreasProperty" class="u-display-ib">Legal</label>
                                </div>
                            </li>
                        </ul>
                    </div>

                    <div class="filter">
                        <h2 class="filter__title">Your organisation</h2>
                        <span class="filter__toggle"></span>
                        <ul class="filter__list u-clearfix">
                            <li class="filter__item">
                                <div class="multiple-choice filter__switch">
                                    {% if showPreFilteredResults %}
                                        <input id="organisationHMRC" type="checkbox" name="organisationFilter" value="hmrc" checked>
                                    {% else %}
                                        <input id="organisationHMRC" type="checkbox" name="organisationFilter" value="hmrc">
                                    {% endif %}
                                    <label for="organisationFilter" class="u-display-ib">
                                        HMRC
                                        <span class="form-hint">Search for learning only within your organisation</span>
                                    </label>
                                </div>
                            </li>
                        </ul>
                    </div>

                    <div class="filter">
                        <h2 class="filter__title">Selected core learning</h2>
                        <span class="filter__toggle"></span>
                        <ul class="filter__list u-clearfix">
                            <li class="filter__item">
                                <div class="multiple-choice filter__switch">
                                    <input id="interestsLeadership" type="checkbox" name="interestFilter1" value="Leadership">
                                    <label for="interestsLeadership" class="u-display-ib">Leadership</label>
                                </div>
                            </li>
                        </ul>
                    </div>

                    <div class="filter filter-toggle __filter-toggle--shut">
                        <h2 class="filter__title filter__title--closed" tabindex="0" onclick="toggleVisibility(this, 'toggleOtherInterestsList', 'js-hidden')">Other core learning areas</h2>
                        <span class="filter__toggle"></span>
                        <ul class="filter__list u-clearfix js-hidden" id="toggleOtherInterestsList">
                           {# <li class="filter__item">
                                <div class="multiple-choice filter__switch">
                                    {% if newCoreInterests %}
                                        <input id="extraInterests4" name="extraInterests4" type="checkbox" value="4"> <label for="extraInterests4" class=" u-display-ib">BLAH</label>
                                    {% endif %}



                                </div>
                            </li>#}

                            {% if newCoreInterests %}

                                {% for item in newCoreInterests %}
                                    <li class="filter__item">
                                        <div class="multiple-choice filter__switch">
                                            <input id="extraInterests_{{ item.value }}" name="extraInterests" type="checkbox" value="{{ item.value }}">
                                            <label for="extraInterests_{{ item.value }}" class=" u-display-ib">{{ item.text }}</label>
                                        </div>
                                    </li>

                                {% endfor %}
                            {% endif %}



                            {#<li class="filter__item">
                                <div class="multiple-choice filter__switch">
                                    <input id="extraInterests1" name="extraInterests1" type="checkbox" value="1"> <label for="extraInterests1" class=" u-display-ib">Coaching and mentoring</label>
                                </div>
                            </li>
                            <li class="filter__item">
                                <div class="multiple-choice filter__switch">
                                    <input id="extraInterests2" name="extraInterests2" type="checkbox" value="2"> <label for="extraInterests2" class=" u-display-ib">Communications &amp; engagement</label>
                                </div>
                            </li>
                            <li class="filter__item">
                                <div class="multiple-choice filter__switch">
                                    <input id="extraInterests3" name="extraInterests3" type="checkbox" value="3"> <label for="extraInterests3" class=" u-display-ib">Contract management</label>
                                </div>
                            </li>
                            <li class="filter__item">
                                <div class="multiple-choice filter__switch">
                                    <input id="extraInterests4" name="extraInterests4" type="checkbox" value="4"> <label for="extraInterests4" class=" u-display-ib">Customer service</label>
                                </div>
                            </li>
                            <li class="filter__item">
                                <div class="multiple-choice filter__switch">
                                    <input id="extraInterests5" name="extraInterests5" type="checkbox" value="5"> <label for="extraInterests5" class=" u-display-ib">Induction &amp; essential skills</label>
                                </div>
                            </li>
                            <li class="filter__item">
                                <div class="multiple-choice filter__switch">
                                    <input id="extraInterests7" name="extraInterests7" type="checkbox" value="7"> <label for="extraInterests7" class=" u-display-ib">Well being and Diversity</label>
                                </div>
                            </li>#}
                        </ul>
                    </div>

                    <input class="button" type="submit" value="Apply search filters">

                </div>

            {%- endcall %}

        {%- endcall %}

        {% call components.columnTwoThirds(extraClass='results-column') %}

            <div class="results">

                {{ components.disciteRow(
                    name='APMG Change Management Foundation',
                    id='9',
                    headingTag='h3',
                    description='In this module you consider how to work with potential providers and achieve what you require. You’ll learn about supply chains, pricing.',
                    workArea='',
                    type='Classoom',
                    duration='5 hours',
                    cost='£149',
                    headingExtraClass='discite__heading',
                    addToLearningPlan=true,
                    extraModifierClass='search',
                    headingURL='#',
                    action='Book'
                ) }}

                {{ components.disciteRow(
                    name='APMG Change Management Foundation & Practitioner',
                    id='9',
                    headingTag='h3',
                    description='Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo',
                    workArea='Commercial',
                    type='Online',
                    duration='2 hours',
                    cost='£Free',
                    headingExtraClass='discite__heading',
                    addToLearningPlan=true,
                    extraModifierClass='search',
                    headingURL='#'
                ) }}

                {{ components.disciteRow(
                    name='APMG International Managing Benefits™ Foundation & Practitioner certification',
                    id='9',
                    headingTag='h3',
                    description='Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi.',
                    workArea='Commercial',
                    type='Classroom',
                    duration='4 hours',
                    cost='£155',
                    headingExtraClass='discite__heading',
                    addToLearningPlan=true,
                    extraModifierClass='search',
                    headingURL='#',
                    action='Book'
                ) }}

                {{ components.disciteRow(
                    name='APMG International Managing Benefits™ Practitioner certification',
                    id='9',
                    headingTag='h3',
                    description='Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis partu.',
                    workArea='Commercial',
                    type='Classroom',
                    duration='4 hours',
                    cost='£89',
                    headingExtraClass='discite__heading',
                    addToLearningPlan=true,
                    extraModifierClass='search',
                    headingURL='#',
                    action='Book'
                ) }}

                {{ components.disciteRow(
                    name='Managing Successful Programmes (MSP®) Advanced Practitioner re-registration dissertation route',
                    id='9',
                    headingTag='h3',
                    description='One morning, when Gregor Samsa woke from troubled dreams, he found himself transformed in his bed into a horrible vermin. He lay on his armour-like back.',
                    workArea='Commercial',
                    type='Classroom',
                    duration='2 days',
                    cost='£259',
                    headingExtraClass='discite__heading',
                    addToLearningPlan=true,
                    extraModifierClass='search',
                    headingURL='#',
                    action='Book'
                ) }}

                {{ components.disciteRow(
                    name='Senior management strategy',
                    id='9',
                    headingTag='h3',
                    description='Lorem. Ligula. Pede odio Eleifend. Dolor dignissim varius libero. Inceptos praesent. Nec eget viverra tellus elementum morbi fusce fermentum euismod volutpat turpis ad quis accumsan curae; tristique per Fermentum sociis.',
                    workArea='Commercial',
                    type='Online',
                    duration='1 hour',
                    cost='£Free',
                    headingExtraClass='discite__heading',
                    addToLearningPlan=true,
                    extraModifierClass='search',
                    headingURL='#'
                ) }}

                {{ components.disciteRow(
                    name='Managing Successful Programmes (MSP®) Practitioner',
                    id='9',
                    headingTag='h3',
                    description='Condimentum ligula convallis molestie aliquet eget, integer luctus rhoncus Aptent sagittis felis justo varius. Quam. Vulputate, nisl cubilia maecenas et sociosqu lobortis erat velit erat praesent tortor.',
                    workArea='Digital',
                    type='Classroom',
                    duration='4 hours',
                    cost='£89',
                    headingExtraClass='discite__heading',
                    addToLearningPlan=true,
                    extraModifierClass='search',
                    headingURL='#',
                    action='Book'
                ) }}

                {{ components.disciteRow(
                    name='Time management',
                    id='9',
                    headingTag='h3',
                    description='Eget curabitur, vulputate quis primis, non tellus venenatis, felis a nostra mus primis. Ridiculus. A suspendisse massa ornare volutpat justo ligula scelerisque maecenas quam Cubilia torquent arcu ut tempus mattis.',
                    workArea='Digital',
                    type='Online',
                    duration='2 hours',
                    cost='£Free',
                    headingExtraClass='discite__heading',
                    addToLearningPlan=true,
                    extraModifierClass='search',
                    headingURL='#'
                ) }}

                {{ components.disciteRow(
                    name='Ship Safety Management Office (SSMO) - Non Residential',
                    id='9',
                    headingTag='h3',
                    description='Eget curabitur, vulputate quis primis, non tellus venenatis, felis a nostra mus primis. Ridiculus. A suspendisse massa ornare volutpat justo ligula scelerisque maecenas quam Cubilia torquent arcu ut tempus mattis.',
                    workArea='HMRC',
                    type='Classroom',
                    duration='2 hours',
                    cost='£89',
                    headingExtraClass='discite__heading',
                    addToLearningPlan=true,
                    extraModifierClass='search',
                    headingURL='#',
                    action='Book'
                ) }}

                {{ components.disciteRow(
                    name='Managing teams remotely',
                    id='9',
                    headingTag='h3',
                    description='Eros dui dignissim nascetur nec maecenas sodales dis platea Mus, sit natoque tempor hendrerit cras massa egestas odio, aliquet quam.',
                    workArea='Digital',
                    type='Online',
                    duration='2 hours 30 minutes',
                    cost='£Free',
                    headingExtraClass='discite__heading',
                    addToLearningPlan=true,
                    extraModifierClass='search',
                    headingURL='#'
                ) }}

            </div>
        {%- endcall %}

    {%- endcall %}

    {% call components.gridRow() %}

        {% call components.columnFull() %}

            {% if showPreFilteredResults %}
                {{ components.pagination(totalItems=14,currentPage=1) }}
            {% else %}
                {{ components.pagination(totalItems=46,currentPage=1) }}
            {% endif %}


        {%- endcall %}

    {%- endcall %}

    <script>
        function toggleVisibility(_this, id, className) {
            event.preventDefault();
            let toggleSwitch = _this;
            let toggleItem = document.getElementById(id);
            if (hasClass(toggleItem, className)) {
                toggleSwitch.classList.add('filter__title--closed');
                toggleItem.classList.remove(className);
            }
            else  {
                toggleSwitch.classList.remove('filter__title--closed');
                toggleItem.classList.add(className);
            }
            // return false;
        }
        function hasClass(target, className) {
            return new RegExp('(\\s|^)' + className + '(\\s|$)').test(target.className);
        }
    </script>

{% endblock %}
